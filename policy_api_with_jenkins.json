{ 
   "resource_type":"Infra",
   "children":[ 
      { 
         "resource_type":"ChildTier1",
         "marked_for_delete":false,
         "Tier1":{ 
            "resource_type":"Tier1",
            "id":"T1-TENANT2",
            "description":"tenant-2 gateway",
            "display_name":"T1-TENANT2",
            "failover_mode":"NON_PREEMPTIVE",
            "tier0_path":"/infra/tier-0s/T0-SITEA",
            "children":[ 
               { 
                  "resource_type":"ChildLocaleServices",
                  "LocaleServices":{ 
                     "resource_type":"LocaleServices",
                     "id":"default",
                     "edge_cluster_path":"/infra/sites/default/enforcement-points/default/edge-clusters/db150f61-ce6b-4e42-a8de-83bd0d2d1b92"
                  }
               },
               { 
                  "resource_type":"ChildSegment",
                  "Segment":{ 
                     "resource_type":"Segment",
                     "id":"ov-web",
                     "description":"overlay web logical switch",
                     "display_name":"OV-WEB",
                     "transport_zone_path":"/infra/sites/default/enforcement-points/default/transport-zones/69007beb-637b-4269-a776-756198e5bf5f",
                     "subnets":[ 
                        { 
                           "gateway_address":"172.16.10.1/24"
                        }
                     ]
                  }
               },
               { 
                  "resource_type":"ChildSegment",
                  "Segment":{ 
                     "resource_type":"Segment",
                     "id":"ov-app",
                     "description":"overlay app logical switch",
                     "display_name":"OV-APP",
                     "transport_zone_path":"/infra/sites/default/enforcement-points/default/transport-zones/69007beb-637b-4269-a776-756198e5bf5f",
                     "subnets":[ 
                        { 
                           "gateway_address":"172.16.20.1/24"
                        }
                     ]
                  }
               },
               { 
                  "resource_type":"ChildSegment",
                  "Segment":{ 
                     "resource_type":"Segment",
                     "id":"ov-db",
                     "description":"overlay db logical switch",
                     "display_name":"OV-DB",
                     "transport_zone_path":"/infra/sites/default/enforcement-points/default/transport-zones/69007beb-637b-4269-a776-756198e5bf5f",
                     "subnets":[ 
                        { 
                           "gateway_address":"172.16.30.1/24"
                        }
                     ]
                  }
               }
            ]
         }
      },
      { 
         "resource_type":"ChildService",
         "marked_for_delete":false,
         "Service":{ 
            "service_entries":[ 
               { 
                  "l4_protocol":"TCP",
                  "source_ports":[ 

                  ],
                  "destination_ports":[ 
                     "8443"
                  ],
                  "resource_type":"L4PortSetServiceEntry",
                  "id":"tcp_8443",
                  "display_name":"TCP 8443"
               }
            ],
            "resource_type":"Service",
            "id":"tcp_8443",
            "display_name":"tcp_8443"
         }
      },
      { 
         "resource_type":"ChildDomain",
         "marked_for_delete":false,
         "Domain":{ 
            "id":"default",
            "resource_type":"Domain",
            "marked_for_delete":false,
            "children":[ 
               { 
                  "resource_type":"ChildSecurityPolicy",
                  "marked_for_delete":"false",
                  "SecurityPolicy":{ 
                     "id":"webapp",
                     "resource_type":"SecurityPolicy",
                     "display_name":"webapp",
                     "description":"webapp Policy",
                     "rules":[ 
                        { 
                           "resource_type":"Rule",
                           "id":"webapp-rule-01",
                           "description":"webapp-rule-01",
                           "display_name":"Management Outbound",
                           "sequence_number":50,
                           "source_groups":[ 
                              "ANY"
                           ],
                           "destination_groups":[ 
                              "/infra/domains/default/groups/MGMT"
                           ],
                           "services":[ 
                              "ANY"
                           ],
                           "profiles":[ 
                              "ANY"
                           ],
                           "action":"ALLOW",
                           "scope":[ 
                              "/infra/domains/default/groups/WEBAPP"
                           ]
                        },
                        { 
                           "resource_type":"Rule",
                           "id":"webapp-rule-02",
                           "description":"webapp-rule-02",
                           "display_name":"Management Inbound",
                           "sequence_number":60,
                           "source_groups":[ 
                              "/infra/domains/default/groups/MGMT"
                           ],
                           "destination_groups":[ 
                              "ANY"
                           ],
                           "services":[ 
                              "ANY"
                           ],
                           "profiles":[ 
                              "ANY"
                           ],
                           "action":"ALLOW",
                           "scope":[ 
                              "/infra/domains/default/groups/WEBAPP"
                           ]
                        },
                        { 
                           "resource_type":"Rule",
                           "id":"webapp-rule-03",
                           "description":"webapp-rule-03",
                           "display_name":"LB to WEB",
                           "sequence_number":70,
                           "source_groups":[ 
                              "/infra/domains/default/groups/LB"
                           ],
                           "destination_groups":[ 
                              "/infra/domains/default/groups/WEB"
                           ],
                           "services":[ 
                              "/infra/services/HTTPS"
                           ],
                           "profiles":[ 
                              "ANY"
                           ],
                           "action":"ALLOW",
                           "scope":[ 
                              "/infra/domains/default/groups/WEBAPP"
                           ]
                        },
                        { 
                           "resource_type":"Rule",
                           "id":"webapp-rule-04",
                           "description":"webapp-rule-04",
                           "display_name":"WEB to APP",
                           "sequence_number":80,
                           "source_groups":[ 
                              "/infra/domains/default/groups/WEB"
                           ],
                           "destination_groups":[ 
                              "/infra/domains/default/groups/APP"
                           ],
                           "services":[ 
                              "/infra/services/tcp_8443"
                           ],
                           "profiles":[ 
                              "ANY"
                           ],
                           "action":"ALLOW",
                           "scope":[ 
                              "/infra/domains/default/groups/WEBAPP"
                           ]
                        },
                        { 
                           "resource_type":"Rule",
                           "id":"webapp-rule-05",
                           "description":"webapp-rule-05",
                           "display_name":"APP to DB",
                           "sequence_number":90,
                           "source_groups":[ 
                              "/infra/domains/default/groups/APP"
                           ],
                           "destination_groups":[ 
                              "/infra/domains/default/groups/DB"
                           ],
                           "services":[ 
                              "/infra/services/HTTP"
                           ],
                           "profiles":[ 
                              "ANY"
                           ],
                           "action":"ALLOW",
                           "scope":[ 
                              "/infra/domains/default/groups/WEBAPP"
                           ]
                        },
                        { 
                           "resource_type":"Rule",
                           "id":"webapp-rule-06",
                           "description":"webapp-rule-06",
                           "display_name":"Block the rest",
                           "sequence_number":100,
                           "destination_groups":[ 
                              "ANY"
                           ],
                           "source_groups":[ 
                              "ANY"
                           ],
                           "services":[ 
                              "ANY"
                           ],
                           "profiles":[ 
                              "ANY"
                           ],
                           "action":"DROP",
                           "logged":"true",
                           "scope":[ 
                              "/infra/domains/default/groups/WEBAPP"
                           ]
                        }
                     ]
                  }
               },
               { 
                  "resource_type":"ChildGroup",
                  "Group":{ 
                     "resource_type":"Group",
                     "marked_for_delete":"false",
                     "id":"MGMT",
                     "display_name":"MGMT",
                     "expression":[ 
                        { 
                           "ip_addresses":[ 
                              "192.168.100.1/32",
                              "192.168.110.10/32"
                           ],
                           "resource_type":"IPAddressExpression",
                           "marked_for_delete":"false"
                        }
                     ]
                  }
               },
               { 
                  "resource_type":"ChildGroup",
                  "Group":{ 
                     "resource_type":"Group",
                     "marked_for_delete":"false",
                     "id":"WEBAPP",
                     "display_name":"WEBAPP",
                     "expression":[ 
                        { 
                           "member_type":"VirtualMachine",
                           "key":"Tag",
                           "operator":"EQUALS",
                           "value":"webapp|",
                           "resource_type":"Condition",
                           "marked_for_delete":"false"
                        }
                     ]
                  }
               },
               { 
                  "resource_type":"ChildGroup",
                  "Group":{ 
                     "resource_type":"Group",
                     "marked_for_delete":false,
                     "id":"LB",
                     "display_name":"LB",
                     "expression":[ 
                        { 
                           "member_type":"VirtualMachine",
                           "key":"Tag",
                           "operator":"EQUALS",
                           "value":"webapp|lb",
                           "resource_type":"Condition",
                           "marked_for_delete":false
                        }
                     ]
                  }
               },
               { 
                  "resource_type":"ChildGroup",
                  "Group":{ 
                     "resource_type":"Group",
                     "marked_for_delete":false,
                     "id":"WEB",
                     "display_name":"WEB",
                     "expression":[ 
                        { 
                           "member_type":"VirtualMachine",
                           "key":"Tag",
                           "operator":"EQUALS",
                           "value":"webapp|web",
                           "resource_type":"Condition",
                           "marked_for_delete":false
                        }
                     ]
                  }
               },
               { 
                  "resource_type":"ChildGroup",
                  "Group":{ 
                     "resource_type":"Group",
                     "marked_for_delete":false,
                     "id":"APP",
                     "display_name":"APP",
                     "expression":[ 
                        { 
                           "member_type":"VirtualMachine",
                           "key":"Tag",
                           "operator":"EQUALS",
                           "value":"webapp|app",
                           "resource_type":"Condition",
                           "marked_for_delete":false
                        }
                     ]
                  }
               },
               { 
                  "resource_type":"ChildGroup",
                  "Group":{ 
                     "resource_type":"Group",
                     "marked_for_delete":false,
                     "id":"DB",
                     "display_name":"DB",
                     "expression":[ 
                        { 
                           "member_type":"VirtualMachine",
                           "key":"Tag",
                           "operator":"EQUALS",
                           "value":"webapp|db",
                           "resource_type":"Condition",
                           "marked_for_delete":false
                        }
                     ]
                  }
               }
            ]
         }
      }
   ]
}
